<div class="w-full bg-[var(--color-background)] min-h-screen flex flex-col">
  <header class="bg-gray-900 p-6">
    <nav>
      <ul class="flex justify-end gap-8 text-[var(--color-primary)] text-lg font-semibold">
        <li><a href="#" class="hover:underline">Inicio</a></li>
        <li><a href="#" class="hover:underline">Funcionalidades</a></li>
        <li><a href="#" class="hover:underline">Contato</a></li>
      </ul>
    </nav>
  </header>

  <main class="flex-grow flex justify-center flex-col px-6 py-8 max-w-6xl mx-auto w-full">
    <div class="text-center mb-8">
      <h1 class="text-5xl font-bold text-[var(--color-primary)]">Chat IA por Voz</h1>
      <p class="text-[var(--color-text)/80] text-lg mt-4 sm:mb-10">
        Converse com uma inteligÃªncia artificial que entende sua voz e responde de forma inteligente.
      </p>
    </div>

    <div class="flex flex-col-reverse md:flex-row w-full gap-8">
      <div class="flex-1 bg-pink-200 rounded-lg p-4 h-[500px] overflow-y-auto shadow-inner border">
        <div *ngIf="mensagens().length > 0" class="space-y-4">
          <div
            *ngFor="let msg of mensagens()"
            class="max-w-[70%] p-4 rounded-md shadow-sm"
            [ngClass]="{
              'ml-auto bg-gray-100 border border-gray-300 text-right': msg.autor === 'user',
              'mr-auto bg-white border border-[var(--color-primary)] text-left': msg.autor === 'ia'
            }"
          >
            <strong class="block mb-1">{{ msg.autor === 'user' ? 'ðŸ‘¤ VocÃª' : 'ðŸ¤– IA' }}</strong>
            <p>{{ msg.conteudo }}</p>
          </div>
        </div>
      </div>

      <div class="w-full md:w-[350px] flex flex-col gap-4 items-stretch">
        <textarea
          [value]="voiceInput()"
          (input)="onInput($event)"
          rows="4"
          placeholder="Fale ou digite sua pergunta"
          class="w-full px-4 py-3 h-32 resize-none rounded-md border border-[var(--color-detalhes)] focus:outline-none focus:ring-2 focus:ring-[var(--color-primary)] placeholder-gray-400"
          id="voiceInput"
        ></textarea>

        <button
          class="flex items-center justify-center gap-2 text-white font-semibold py-3 rounded-md transition duration-300"
          [ngClass]="gravando() ? 'bg-red-600 animate-pulse' : 'bg-[var(--color-primary)] hover:bg-pink-700'"
          title="Ativar reconhecimento de voz"
          (click)="startListening()"
        >
          <span class="material-icons">mic</span>
          {{ gravando() ? 'Gravando...' : 'Falar' }}
        </button>

        <button
          class="bg-[var(--color-secondary)] text-white px-6 py-3 rounded-md hover:bg-blue-700 transition font-semibold"
          (click)="enviar()"
          [disabled]="carregando()"
        >
          {{ carregando() ? 'Carregando...' : 'Enviar Mensagem' }}
        </button>

        <button
          class="bg-[var(--color-gray-500)] text-white px-6 py-3 rounded-md transition font-semibold hover:bg-gray-700"
          (click)="limparHistorico()"
        >
          Limpar HistÃ³rico
        </button>
      </div>
    </div>
  </main>

  <footer class="w-full h-20 bg-[var(--color-primary)] flex items-center justify-center text-white text-sm font-medium px-4 text-center">
    <p>
      Chat IA por Voz Â© 2025 â€” Desenvolvido por Anabel Marinho â€” API utilizada:
      <a href="https://openrouter.ai/settings/keys" target="_blank" class="underline hover:text-accent">OpenRouter.ai</a>
    </p>
  </footer>
</div>
